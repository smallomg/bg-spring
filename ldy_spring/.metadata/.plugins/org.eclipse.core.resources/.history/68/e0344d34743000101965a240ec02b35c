<%@ page contentType="text/html;charset=UTF-8" %>
<%@ taglib prefix="c" uri="jakarta.tags.core" %>

<html>
<head>
    <title>ì¢Œì„ ì˜ˆì•½</title>
    <style>
        .seat-button {
            width: 60px;
            height: 60px;
            margin: 5px;
            font-weight: bold;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .reserved {
            background-color: crimson;
            color: white;
        }

        .available {
            background-color: forestgreen;
            color: white;
        }
    </style>
</head>
<body>

<h2>ğŸ¬ ì¢Œì„ ì˜ˆì•½ ì‹œìŠ¤í…œ</h2>

<form id="seatForm" method="post">
    <c:forEach var="seat" items="${seats}">
        <button type="button"
                class="seat-button ${seat.result == 1 ? 'reserved' : 'available'}"
                onclick="toggleSeat('${seat.seatNumber}')"
                id="${seat.seatNumber}">
            ${seat.seatNumber}
        </button>

        <!-- 5ê°œì”© ì¤„ë°”ê¿ˆ -->
        <c:if test="${seat.sno % 5 == 0}">
            <br/>
        </c:if>
    </c:forEach>
</form>

<script>
    function toggleSeat(seatNumber) {
        fetch("/seat/toggle?seatNumber=" + seatNumber, {
            method: "POST"
        })
        .then(res => res.text())
        .then(msg => {
            alert(msg);
            location.reload(); // ìƒˆë¡œê³ ì¹¨í•˜ì—¬ ìƒíƒœ ë°˜ì˜
        })
        .catch(err => {
            alert("ì—ëŸ¬ ë°œìƒ: " + err);
        });
    }
</script>

</body>
</html>


<h2>ì˜í™” ê¸°ëŒ€í‰ ì‘ì„±</h2>

<form action="/review/scoreInsert" method="post">
	<input type="hidden" name="mno" value="${mno}" /> <label>ë³„ì :</label> <select
		name="score">
		<option value="">ì„ íƒ</option>
		<option value="1">â˜…â˜†â˜†â˜†â˜†</option>
		<option value="2">â˜…â˜…â˜†â˜†â˜†</option>
		<option value="3">â˜…â˜…â˜…â˜†â˜†</option>
		<option value="4">â˜…â˜…â˜…â˜…â˜†</option>
		<option value="5">â˜…â˜…â˜…â˜…â˜…</option>
	</select><br> <input type="submit" value="ë¦¬ë·° ë“±ë¡">
</form>

<hr>

<h3>ìƒì˜ ì˜ˆì •ì¸ ì˜í™” ê¸°ëŒ€í‰</h3>
<c:if test="${empty reviews}">
	<p>ë“±ë¡ëœ ê¸°ëŒ€í‰ì´ ì—†ìŠµë‹ˆë‹¤.</p>
</c:if>

<table border="1" width="100%" cellpadding="5">
	<tr>
		<th>ì‘ì„±ì</th>
		<th>ë³„ì </th>

	</tr>
	<c:forEach var="r" items="${reviews}">
		<tr>
			<td>${r.id}</td>
			<td><c:choose>
					<c:when test="${r.score == 1}">â˜…â˜†â˜†â˜†â˜†</c:when>
					<c:when test="${r.score == 2}">â˜…â˜…â˜†â˜†â˜†</c:when>
					<c:when test="${r.score == 3}">â˜…â˜…â˜…â˜†â˜†</c:when>
					<c:when test="${r.score == 4}">â˜…â˜…â˜…â˜…â˜†</c:when>
					<c:when test="${r.score == 5}">â˜…â˜…â˜…â˜…â˜…</c:when>
					<c:otherwise>ì„ íƒ ì•ˆí•¨</c:otherwise>
				</c:choose></td>
		</tr>
	</c:forEach>
</table>

<script>
	
